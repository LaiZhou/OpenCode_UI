<h1>OpenCode UI</h1>

<p>
  <b>OpenCode UI</b> is an open-source AI coding agent integration that brings the power of <a href="https://opencode.ai">opencode.ai</a> directly into your JetBrains IDE development workflow.
</p>

<h2>Key Features</h2>
<ul>
  <li><b>Quick Launch:</b> Connect to existing OpenCode server (e.g., OpenCode Desktop) or create new terminal with a single shortcut (Cmd+Esc / Ctrl+Esc). Supports automatic authentication.</li>
  <li><b>Context Sharing:</b> Seamlessly send code selections or file references (with line numbers) from your editor or project view directly to the AI agent (Opt+Cmd+K).</li>
  <li><b>Diff Review:</b> Automatically review AI-generated code changes in chronological order using a native multi-file diff viewer. Accept stages changes, Reject restores original content.</li>
  <li><b>Notifications:</b> Get system-level alerts when AI tasks complete, so you can focus on other work while OpenCode runs.</li>
  <li><b>Auto-Resume:</b> New terminals automatically restore your last session context - pick up right where you left off.</li>
  <li><b>Smart Links:</b> Click file paths in the terminal (e.g., <code>@src/main.kt#L10-20</code>) to jump directly to the code.</li>
</ul>

<br>

<p>Follow these steps to set up and start using the OpenCode plugin:</p>
<ol>
  <li>Install a <b>compatible JetBrains IDE</b> (version 2025.2 or later).</li>
  <li><b>Install the OpenCode CLI:</b> This plugin acts as a bridge to the CLI tool. Ensure you have it installed:
    <br><code>npm install -g opencode</code>
  </li>
  <li><b>Ensure Git is installed:</b> The plugin uses local git commands for managing changes.</li>
  <li>Launch your IDE and ensure the plugin is enabled.</li>
  <li>Press <code>Cmd + Esc</code> (Mac) or <code>Ctrl + Esc</code> (Windows/Linux) to launch your first session.</li>
</ol>

<h2>Usage and Shortcuts</h2>
<ul>
  <li><b>Connect/Launch:</b> <code>Cmd + Esc</code> (Mac) / <code>Ctrl + Esc</code> (Win/Linux) - Opens connection dialog to connect to existing server or create new terminal.</li>
  <li><b>Add Context:</b> <code>Opt + Cmd + K</code> (Mac) / <code>Ctrl + Alt + K</code> (Win/Linux) - Sends file references/selection to the terminal.</li>
  <li><b>Review Changes:</b> When OpenCode finishes a task, a notification will appear. Click <b>Review Changes</b> to open the diff viewer.</li>
</ul>

<h2>Diff Viewer Guide</h2>
<ul>
  <li><b>Order:</b> Diffs are presented in the order they were generated (chronological).</li>
  <li><b>Navigation:</b> Use <code>←</code> / <code>→</code> arrows to switch between modified files.</li>
  <li><b>Jump Changes:</b> Use <code>↑</code> / <code>↓</code> to jump between specific changes in the current file.</li>
  <li><b>Accept:</b> Stages the file (<code>git add</code>), marking it as reviewed.</li>
  <li><b>Reject:</b> Restores the file to its pre-OpenCode state using <code>diff.before</code> content. Preserves your unstaged changes and staging state.</li>
</ul>
<p><i>The plugin automatically creates snapshots in your IDE's Local History for safety.</i></p>

<h2>Plugin Compatibility</h2>
<p>
  <b>Complementary Plugins:</b> This plugin requires the <b>Terminal</b> plugin (bundled by default).
</p>
